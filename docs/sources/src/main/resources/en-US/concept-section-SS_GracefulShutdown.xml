<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "SIP_Servlets_Server_User_Guide.ent">
%BOOK_ENTITIES;
]>
<!-- chapter id nickname: ssfjfs -->


<section id="ssfjfs-SS_GracefulShutdown">
  
    <title>&PLATFORM_NAME; Graceful Shutdown</title>
      <para>Graceful shutdown of a server or SIP/Web Applications is when existing request/connections/sessions are allowed to gracefully complete while no new requests and/or connections and/or sessions are accepted. SIP Servlets Container or Applications can be gracefully shutdown through the Management Console, JMX or Jopr/RHQ as described below</para>
      <para>As soon as the shutdown command is given, the container will stop the applications so that they do not accept any more inbound connections. 
      It will inform also load balancers that the server is no longer part of the cluster if the command is given on the container and not an individual application. 
      The Applications are closed so that they do not accept any more requests, but the requests currently inside the container will drain out and the Server instance will shutdown after the grace period expires.</para>
  <section id="ssfjfs-SS_MSSConsole_GracefulShutdown">
  <title>Graceful Shutdown through &PLATFORM_NAME; SIP Servlets Management Console</title>

     	  <figure>
		    <title>Graceful Shutdown of Container through &PLATFORM_NAME; SIP Servlets Management Console</title>
		    <mediaobject id="mss-MSSManagementConsole-ss-ServerControl">
		      <imageobject>
		        <imagedata width="440" fileref="images/mss-MSSSManagementConsole-ss-ServerControl.png" format="PNG"/>
		      </imageobject>
		    </mediaobject>
		  </figure>

   </section>
   <section id="ssfjfs-SS_JoprConsole_GracefulShutdown">
  <title>Graceful Shutdown of Container or Applications through &PLATFORM_NAME; SIP Servlets Jopr Console</title>   
	  		 	  <para><literal>To Gracefully shutdown an Application through the Jopr Console follow the steps below : </literal> </para>
		     	  <figure>
				    <title>Select the 'Control' Tab of an Application to Shutdown Gracefully</title>
				    <mediaobject id="mss-MSSJopr-ss-ApplicationControl">
				      <imageobject>
				        <imagedata width="440" fileref="images/mss-MSSSJopr-ss-ApplicationControl.png" format="PNG"/>
				      </imageobject>
				    </mediaobject>
				  </figure>
				  <figure>
				    <title>Fill out the 'Time To Wait' Field and click 'OK' Button</title>
				    <mediaobject id="mss-MSSSJopr-ss-ApplicationGracefulShutdown">
				      <imageobject>
				        <imagedata width="440" fileref="images/mss-MSSSJopr-ss-ApplicationGracefulShutdown.png" format="PNG"/>
				      </imageobject>
				    </mediaobject>
				  </figure>
	  		 	  <para><literal>To Gracefully shutdown the Container through the Jopr Console follow the steps below : </literal> </para>
		     	  <figure>
				    <title>Select the 'Control' Tab of the SipApplicationDispatcher to Shutdown Gracefully</title>
				    <mediaobject id="mss-MSSJopr-ss-ServerControl">
				      <imageobject>
				        <imagedata width="440" fileref="images/mss-MSSSJopr-ss-ServerControl.png" format="PNG"/>
				      </imageobject>
				    </mediaobject>
				  </figure>
				  <figure>
				    <title>Fill out the 'Time To Wait' Field and click 'OK' Button</title>
				    <mediaobject id="mss-MSSSJopr-ss-ServerGracefulShutdown">
				      <imageobject>
				        <imagedata width="440" fileref="images/mss-MSSSJopr-ss-ServerGracefulShutdown.png" format="PNG"/>
				      </imageobject>
				    </mediaobject>
				  </figure>
	</section>
    <section id="ssfjfs-SS_JMXConsole_GracefulShutdown">
    	 <title>Graceful Shutdown of Container or Applications through &PLATFORM_NAME; SIP Servlets JMX Console</title>
     	 	 	  <para><literal>To Gracefully shutdown an Application through the JMX Console follow the steps below : </literal> </para>		     	  
				  <figure>
				    <title>Find the 'jboss.web:J2EEApplication=none,J2EEServer=none,j2eeType=WebModule,name=//localhost/&lt;application-name&gt;' MBean and go to the 'stopGracefully' operation, Fill out the 'Time To Wait' Field and click 'Invoke' Button</title>
				    <mediaobject id="mss-MSSSJMX-ss-ApplicationGracefulShutdown">
				      <imageobject>
				        <imagedata width="440" fileref="images/mss-MSSSJMX-ss-ApplicationGracefulShutdown.png" format="PNG"/>
				      </imageobject>
				    </mediaobject>
				  </figure>
			 	  <para><literal>To Gracefully shutdown the Container through the JMX Console follow the steps below : </literal> </para>
		     	  <figure>
				    <title>Find the 'jboss.web:type=SipApplicationDispatcher' MBean and go to the 'stopGracefully' operation, Fill out the 'Time To Wait' Field and click 'Invoke' Button</title>
				    <mediaobject id="mss-MSSJMX-ss-ServerGracefulShutdown">
				      <imageobject>
				        <imagedata width="440" fileref="images/mss-MSSSJMX-ss-ServerGracefulShutdown.png" format="PNG"/>
				      </imageobject>
				    </mediaobject>
				  </figure>				  		 
    </section>
    </section>